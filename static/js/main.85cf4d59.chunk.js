(this["webpackJsonpbody-girl-animal-client"]=this["webpackJsonpbody-girl-animal-client"]||[]).push([[0],{109:function(e,a){},117:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(17),l=t.n(c),i=(t(79),t(29)),u=t(8),m=(t(80),t(123)),s=t(66),o=t.n(s),d=t(128),f=t(69),b=t(127),E=t(125),v=t(120),g=t(68),p=function(e){var a=Object(n.useRef)(),t=Object(n.useRef)(),c=function(e,a){e.preventDefault(),e.stopPropagation(),a()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"bg-light justify-content-between",bg:"dark",variant:"dark"},r.a.createElement(E.a,{inline:!0,onSubmit:function(t){return c(t,(function(){return e.saveUsername(a.current.value.trim())}))}},r.a.createElement(v.a,{className:"mr-sm-2",onChange:function(){return e.setUsernameSaved(""===a.current.value.trim())}},r.a.createElement(v.a.Prepend,null,r.a.createElement(v.a.Text,{id:"basic-addon1"},r.a.createElement("span",{role:"img","aria-label":"user-avatar-icon"},"\ud83d\udc64"))),r.a.createElement(g.a,{ref:a,placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",defaultValue:e.username})),r.a.createElement(f.a,{onClick:function(){return e.saveUsername(a.current.value.trim())},disabled:e.usernameSaved},"Save")),r.a.createElement(E.a,{inline:!0,onSubmit:function(a){return c(a,(function(){return e.setSeatchText(t.current.value.trim())}))}},r.a.createElement(f.a,{variant:"success",className:" mr-sm-2"},"Create game"),r.a.createElement(g.a,{ref:t,type:"text",placeholder:"Type ID or name...",className:" mr-sm-2"}),r.a.createElement(f.a,{onClick:function(){return e.setSeatchText(t.current.value.trim())}},"Search"))))},h=t(124),S=function(){var e=Object(n.useState)(!1),a=Object(u.a)(e,2),t=a[0],c=a[1],l=function(){return c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:t,onHide:l},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"Modal heading")),r.a.createElement(h.a.Body,null,"Woohoo, you're reading this text in a modal!"),r.a.createElement(h.a.Footer,null,r.a.createElement(f.a,{variant:"secondary",onClick:l},"Close"),r.a.createElement(f.a,{variant:"primary",onClick:l},"Save Changes"))))},I=function(e){var a=j(e.connection),t=Object(n.useState)(""),c=Object(u.a)(t,2),l=c[0],i=c[1],m=function(e){return e.id.includes(l)||e.name.includes(l)};return console.log(a.filter(m)),r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{setSeatchText:i,saveUsername:e.saveUsername,setUsernameSaved:e.setUsernameSaved,username:e.username,usernameSaved:e.usernameSaved}),r.a.createElement(S,null),a.filter(m).map((function(a){return r.a.createElement(d.a,{key:a.id,border:"primary",className:"m-2 game-card"},r.a.createElement(d.a.Body,null,r.a.createElement(d.a.Title,null,a.name),r.a.createElement(d.a.Text,null,r.a.createElement("br",null),r.a.createElement("span",{className:"border border-dark p-3 mt-3"},a.users.map((function(e,t){return r.a.createElement("span",{key:t},e.name,t!==a.users.length-1?r.a.createElement(r.a.Fragment,null,", "):"")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,"ID:",r.a.createElement("span",{className:"text-primary m-1"},a.id))),r.a.createElement(f.a,{variant:"primary",onClick:function(){return t=a.id,e.connection.emit("reqJoinGame",t),void e.connection.on("getJoinGame",(function(a){a?e.setGameId(t):e.setGameId(null)}));var t}},"Join")))})))},j=function(e){var a=Object(n.useState)([]),t=Object(u.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){e&&(e.emit("reqGames"),e.on("getGames",(function(e){return setInterval((function(){return c(e)}))}),1e4))}),[e]),r},y=t(121),O=t(44),k=function(e){var a="";switch(e.toggle){case 0:a="danger";break;case 5:a="primary";break;case 10:a="success";break;default:a="danger"}return"confirmed"!==e.handState?r.a.createElement(v.a.Prepend,null,r.a.createElement(v.a.Text,{className:a},e.toggle)):r.a.createElement(y.a,{disabled:e.disabled,onSelect:function(a){return e.setInputScore(a,e.handId,e.inputIndex)},as:v.a.Prepend,variant:a,title:e.toggle},r.a.createElement(O.a.Item,{eventKey:0},"0"),r.a.createElement(O.a.Item,{eventKey:5},"5"),r.a.createElement(O.a.Item,{eventKey:10},"10"))},x=function(e){var a=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"align-middle"},r.a.createElement(v.a,{size:"sm",className:"mb-3"},"playing"!==e.state?r.a.createElement(k,{handId:e.handId,inputIndex:e.index,toggle:e.input.score,handState:e.handState,setInputScore:e.setInputScore}):"",r.a.createElement(g.a,{ref:a,"aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",disabled:"playing"!==e.handState,defaultValue:e.input.value,onBlur:function(){return e.setInputValue(a.current.value,e.handId,e.index)}}))))},w=function(e){var a;switch(e.hand.state){case"playing":a=r.a.createElement(f.a,{variant:"success",onClick:function(){return e.confirmHand(e.hand.id)}},"Confirm");break;case"waiting":a=r.a.createElement(f.a,{variant:"success",onClick:function(){return e.confirmHand(e.hand.id)},disabled:!0},"Confirmed");break;case"confirmed":a=r.a.createElement(f.a,{variant:"primary",onClick:function(){return e.submitHand(e.hand.id)}},"Submit");break;default:a=r.a.createElement("h6",null,"Submitted")}return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"align-middle"},a))},N=function(e){var a=e.hand.inputs.reduce((function(e,a){return e+a.score}),0);return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"align-middle"},e.hand.character),e.hand.inputs.map((function(a,t){return r.a.createElement(x,{key:t,index:t,handId:e.hand.id,input:a,handState:e.hand.state,setInputScore:e.setInputScore,setInputValue:e.setInputValue,state:e.hand.state})})),r.a.createElement(w,{hand:e.hand,confirmHand:e.confirmHand,submitHand:e.submitHand}),r.a.createElement("td",{className:"align-middle"},a))},U=function(e){return r.a.createElement(r.a.Fragment,null,e.hands.map((function(a,t){return r.a.createElement("tr",{key:t,className:"text-center align-middle"},r.a.createElement(N,{hand:a,setInputScore:e.setInputScore,setInputValue:e.setInputValue,confirmHand:e.confirmHand,submitHand:e.submitHand}))})))},C=t(122),H=function(e){var a=e.hands.reduce((function(e,a){return e+a.inputs.reduce((function(e,a){return e+a.score}),0)}),0);return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{className:"w-100 p-1 bg-dark text-white fixed-bottom"},r.a.createElement(C.a,{variant:"primary",className:"float-right m-0"},a),r.a.createElement(C.a,{variant:"none",className:"float-right m-0"},"TOTAL")))},F=t(126),T=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"justify-content-between",bg:"dark",variant:"dark"},r.a.createElement(E.a,{inline:!0},r.a.createElement(v.a,{className:"mr-sm-2"},r.a.createElement(v.a.Prepend,null,r.a.createElement(v.a.Text,{id:"basic-addon1"},r.a.createElement("span",{role:"img","aria-label":"user-avatar-icon"},"\ud83d\udc64"))),r.a.createElement(g.a,{placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",defaultValue:e.username,disabled:!0}))),r.a.createElement(E.a,{inline:!0},r.a.createElement(f.a,{variant:"danger",onClick:function(){return e.quitGame()}},"Quit game"))))},G=function(e,a){var t=Object(n.useState)([]),r=Object(u.a)(t,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){a&&e&&(a.emit("reqColumns",e),a.on("getColumns",(function(e){return l(e.concat(["Actions","Total"]))})))}),[e]),[c,l]},q=function(e,a,t){var r=Object(n.useState)([]),c=Object(u.a)(r,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){a&&e&&(a.emit("reqHands",{gameId:e,userId:t}),a.on("getHands",(function(e){return i(e)})))}),[e,t]),[l,i]},V=function(e,a,t,r,c){var l=Object(n.useState)(null),i=Object(u.a)(l,2),m=i[0],s=i[1];return Object(n.useEffect)((function(){var n=o()(e,{"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]});!a||0===Object.keys(a).length&&a.constructor===Object?(n.emit("reqUserId"),n.on("getUserId",(function(e){return t("userId",e.id,{maxAge:28800})&&r(e.name)}))):(n.emit("reqUsername",a),n.on("getUsername",(function(e){r(e),c(!0)}))),s(n)}),[e,a,t,r,c]),m};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement((function(){var e=Object(F.a)(["body-girl-animal-userId"]),a=Object(u.a)(e,3),t=a[0].userId,c=a[1],l=(a[2],Object(n.useState)(!1)),s=Object(u.a)(l,2),o=s[0],d=s[1],f=Object(n.useState)(""),b=Object(u.a)(f,2),E=b[0],v=b[1],g=V("http://localhost:15519",t,c,v,d),p=Object(n.useState)(null),h=Object(u.a)(p,2),S=h[0],j=h[1],y=G(S,g),O=Object(u.a)(y,2),k=O[0],x=O[1],w=q(S,g,t),N=Object(u.a)(w,2),C=N[0],B=N[1];return r.a.createElement(r.a.Fragment,null,null===S?r.a.createElement(I,{connection:g,setGameId:j,setColumns:x,setHands:B,saveUsername:function(e){g.emit("reqSaveUsername",{id:t,name:e}),g.on("getSaveUsername",(function(a){return a&&d(!0)&&v(e)}))},usernameSaved:o,setUsernameSaved:d,username:E}):r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{username:E,quitGame:function(){g.emit("reqQuitGame"),g.on("getQuitGame",(function(){return window.location.reload(!1)}))}}),r.a.createElement(m.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,k.map((function(e,a){return r.a.createElement("th",{key:a},e)})))),r.a.createElement("tbody",null,r.a.createElement(U,{hands:C,setInputScore:function(e,a,t){var n=C.findIndex((function(e){return e.id===a})),r=Object(i.a)(C);r[n].inputs[t].score=Number(e),B(r)},setInputValue:function(e,a,t){var n=C.findIndex((function(e){return e.id===a})),r=Object(i.a)(C);r[n].inputs[t].value=e,B(r)},confirmHand:function(e){var a=C.findIndex((function(a){return a.id===e})),t=Object(i.a)(C);t[a].state="waiting",B(t)},submitHand:function(e){var a=C.findIndex((function(a){return a.id===e})),t=Object(i.a)(C);t[a].state="submitted",B(t)}}))),r.a.createElement(H,{columns:k,hands:C})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,a,t){e.exports=t(117)},79:function(e,a,t){}},[[74,1,2]]]);
//# sourceMappingURL=main.85cf4d59.chunk.js.map